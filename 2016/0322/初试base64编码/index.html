<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>初试base64编码 | 清新</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="今天来记录一下Base64编码的事吧，其实这玩意也谈不上是编码，只是一个字符串转换的事！不过我觉得有必要装一下这个逼，一天不装浑身难受，哈哈。。。 这里贴个Base64的介绍吧，来自百度百科：  Base64是网络上最常见的用于传输8Bit字节代码的编码方式之一，大家可以查看RFC2045～RFC2049，上面有MIME的详细规范。Base64编码可用于在HTTP环境下传递较长的标识信息。例如，在">
<meta name="keywords" content="BASE64">
<meta property="og:type" content="article">
<meta property="og:title" content="初试base64编码">
<meta property="og:url" content="https:&#x2F;&#x2F;www.qingxin.org&#x2F;2016&#x2F;0322&#x2F;%E5%88%9D%E8%AF%95base64%E7%BC%96%E7%A0%81&#x2F;index.html">
<meta property="og:site_name" content="清新">
<meta property="og:description" content="今天来记录一下Base64编码的事吧，其实这玩意也谈不上是编码，只是一个字符串转换的事！不过我觉得有必要装一下这个逼，一天不装浑身难受，哈哈。。。 这里贴个Base64的介绍吧，来自百度百科：  Base64是网络上最常见的用于传输8Bit字节代码的编码方式之一，大家可以查看RFC2045～RFC2049，上面有MIME的详细规范。Base64编码可用于在HTTP环境下传递较长的标识信息。例如，在">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;www.qingxin.org&#x2F;images&#x2F;base64_0.png">
<meta property="og:updated_time" content="2019-11-22T18:15:03.478Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;www.qingxin.org&#x2F;images&#x2F;base64_0.png">
  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    });
  </script>
  <link rel="stylesheet" href="/css/index.css">
	
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
						m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-160992877-1', 'auto');
	ga('send', 'pageview');
</script>


</head>


<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">野生纯逗</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://dribbble.com/" target="_blank" class="nav-icn iconfont icon-dribbble"></a>
          
        
          
            <a href="https://www.behance.net/" target="_blank" class="nav-icn iconfont icon-behance"></a>
          
        
          
            <a href="http://lofter.com/" target="_blank" class="nav-icn iconfont icon-lofter"></a>
          
        
          
            <a href="https://www.instagram.com/sakurahams/" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://github.com/simonln/" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/tags" class="nav-menu ">TAGS</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">初试base64编码</h2>
  <p class="sub">Mar 22, 2016</p>
  <article class="content">
    <p>今天来记录一下Base64编码的事吧，其实这玩意也谈不上是编码，只是一个字符串转换的事！不过我觉得有必要装一下这个逼，一天不装浑身难受，哈哈。。。</p>
<p>这里贴个Base64的介绍吧，来自百度百科：</p>
<blockquote>
<p>Base64是网络上最常见的用于传输8Bit字节代码的编码方式之一，大家可以查看RFC2045～RFC2049，上面有MIME的详细规范。Base64编码可用于在HTTP环境下传递较长的标识信息。例如，在Java Persistence系统Hibernate中，就采用了Base64来将一个较长的唯一标识符（一般为128-bit的UUID）编码为一个字符串，用作HTTP表单和HTTP GET URL中的参数。在其他应用程序中，也常常需要把二进制数据编码为适合放在URL（包括隐藏表单域）中的形式。此时，采用Base64编码具有不可读性，即所编码的数据不会被人用肉眼所直接看到。</p>
</blockquote>
<h2 id="Base64的详细编码方式"><a href="#Base64的详细编码方式" class="headerlink" title="Base64的详细编码方式"></a>Base64的详细编码方式</h2><p>所谓Base64，就是说选出64个字符—-小写字母a-z、大写字母A-Z、数字0-9、符号”+”、”/“（再加上作为垫字的”=”，实际上是65个字符）—-作为一个基本字符集。然后，其他所有符号都转换成这个字符集中的字符。</p>
<p>具体来说，转换方式可以分为四步。</p>
<h3 id="第一步，将每三个字节作为一组，一共是24个二进制位。"><a href="#第一步，将每三个字节作为一组，一共是24个二进制位。" class="headerlink" title="第一步，将每三个字节作为一组，一共是24个二进制位。"></a>第一步，将每三个字节作为一组，一共是24个二进制位。</h3><h3 id="第二步，将这24个二进制位分为四组，每个组有6个二进制位。"><a href="#第二步，将这24个二进制位分为四组，每个组有6个二进制位。" class="headerlink" title="第二步，将这24个二进制位分为四组，每个组有6个二进制位。"></a>第二步，将这24个二进制位分为四组，每个组有6个二进制位。</h3><h3 id="第三步，在每组前面加两个00，扩展成32个二进制位，即四个字节。"><a href="#第三步，在每组前面加两个00，扩展成32个二进制位，即四个字节。" class="headerlink" title="第三步，在每组前面加两个00，扩展成32个二进制位，即四个字节。"></a>第三步，在每组前面加两个00，扩展成32个二进制位，即四个字节。</h3><h3 id="第四步，根据下表，得到扩展后的每个字节的对应符号，这就是Base64的编码值。"><a href="#第四步，根据下表，得到扩展后的每个字节的对应符号，这就是Base64的编码值。" class="headerlink" title="第四步，根据下表，得到扩展后的每个字节的对应符号，这就是Base64的编码值。"></a>第四步，根据下表，得到扩展后的每个字节的对应符号，这就是Base64的编码值。</h3><p><img src="/images/base64_1.png" alt="编码表"><br>编码表</p>
<p>到这我们可能会发现，如果原始的字符串的字节数不是三的倍数，怎么办？？？</p>
<p>好，这个问题有意思。在Base64的规则里是这么规定的：</p>
<blockquote>
<p>当剩下的字符数量不足3个字节时，则应使用0进行填充，相应的，输出字符则使用’=’占位</p>
</blockquote>
<h2 id="举个栗子"><a href="#举个栗子" class="headerlink" title="举个栗子"></a>举个栗子</h2><p>转前： s 1 3</p>
<p>先转成ascii：对应 115 49 51</p>
<p>2进制： 01110011 00110001 00110011</p>
<p>6个一组（4组） 011100110011000100110011</p>
<p>然后才有后面的 011100 110011 000100 110011</p>
<p>然后计算机是8位8位的存数 6个不够，自动就补两个高位0了</p>
<p>所有有了 高位补0</p>
<p>科学计算器输入 00011100 00110011 00000100 00110011</p>
<p>得到 28 51 4 51</p>
<p>查下编码表 c z E z</p>
<p><strong>所以Base64就是将3个字节拓展成四个字节来达到所谓的编码</strong></p>
<p>贴个c语言的源码<br>注：只包含编码模块</p>
<pre><code class="C">#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
/*
此程序用来进行base64编码
*/
void encrypt64(char *three_bits,char *four_bits)
{   //编码函数
    const unsigned char base64_enc_map[64] ={ //进行base64转换的码表
    &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;,
    &#39;K&#39;, &#39;L&#39;, &#39;M&#39;, &#39;N&#39;, &#39;O&#39;, &#39;P&#39;, &#39;Q&#39;, &#39;R&#39;, &#39;S&#39;, &#39;T&#39;,
    &#39;U&#39;, &#39;V&#39;, &#39;W&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;,
    &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;i&#39;, &#39;j&#39;, &#39;k&#39;, &#39;l&#39;, &#39;m&#39;, &#39;n&#39;,
    &#39;o&#39;, &#39;p&#39;, &#39;q&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39;, &#39;x&#39;,
    &#39;y&#39;, &#39;z&#39;, &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;,
    &#39;8&#39;, &#39;9&#39;, &#39;+&#39;, &#39;/&#39;};
    union{ unsigned char a[3];unsigned int b;} a;
    int i;
    for(i=0;i&lt;3;i++)    //把读取的3个字节赋给联合体a
    a.a[2-i]=three_bits[i];
    for(i=0;i&lt;4;i++)
    {
        four_bits[3-i]=base64_enc_map[a.a[0]&amp;63];
        a.b=a.b&gt;&gt;6;
    }
    four_bits[4]=&#39;\0&#39;;
}
void translate(char *source,char *encrypted)
{           //通过此函数来将原字符串进行分割，并进行转换
     int len=strlen(source),i;
     char four_bits[5];
     for(i=0;i&lt;len-2;i+=3)
     {
            encrypt64(&amp;source[i],four_bits);
            strcat(encrypted,four_bits);
     }
     if(len%3==1)
        {
            encrypt64(&amp;source[len-1],four_bits);
            four_bits[2]=&#39;\0&#39;;
            strcat(encrypted,four_bits);
            strcat(encrypted,&quot;==&quot;);
        }
    if(len%3==2)
        {
            encrypt64(&amp;source[len-2],four_bits);
            four_bits[3]=&#39;\0&#39;;
            strcat(encrypted,four_bits);
            strcat(encrypted,&quot;=&quot;);
        }
}
void main()
{
    char a[]=&quot;hello world !&quot;,b[30]=&quot;&quot;; //a字串是需要加密的字串，b为储存加密过后的字串
    translate(a,b);
    printf(&quot;the original string is :\n %s\n&quot;,a);
    printf(&quot;the string is encrypted : \n%s\n&quot;,b);
}</code></pre>
<p>程序短小精悍有木有，运行起来很快有木有，只依赖两个标准库，可以随便移植随便哪个平台都可以跑有木有，当然这是c的长处嘛</p>
<p>来贴个运行截图：<br><img src="/images/base64_2.png" alt="我是图"><br>我是图</p>
<p>这个框框是这么的熟悉有木有，哈哈。黑色的框框</p>
<p>好了，Base64解码的坑有时间再来填吧，拜了个拜嘞。。。</p>

  </article>
  <footer class="f-cf">
    
      <a href="/2016/0323/%E9%82%A3%E4%BA%9B%E4%BA%BA%EF%BC%8C%E9%82%A3%E4%BA%9B%E8%AF%9D/" class="link f-fl">⟵那些人，那些话</a>
    
    
      <a href="/2016/0313/%E9%82%A3%E4%BA%9B%E4%BA%BA%EF%BC%8C%E9%82%A3%E4%BA%9B%E4%BA%8B/" class="link f-fr">那些人，那些事⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  
  
    
      
        · <a href="https://dribbble.com/" target="_blank" class="nav-icn">Dribbble</a>
      
    
      
        · <a href="https://www.behance.net/" target="_blank" class="nav-icn">Behance</a>
      
    
      
        · <a href="http://lofter.com/" target="_blank" class="nav-icn">Lofter</a>
      
    
      
        · <a href="https://www.instagram.com/sakurahams/" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        · <a href="https://github.com/simonln/" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  <span class="copyright">All rights reserved @Clover Tuan</span>
</footer>
  </div>
</body>
</html>